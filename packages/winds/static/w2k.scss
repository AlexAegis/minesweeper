@import '98.css/dist/98.css';

@font-face {
	font-family: 'fs-tahoma-8px';
	src: url('fonts/fs-tahoma-8px/fs-tahoma-8px.woff2') format('woff2');
}

// All values and names were picked from Windows 2000
.w2k {
	--win-start-button-width: 54px; // + 1 the bo
	--win-taskbar-height: 28px; // with box-sizing: border-box;
	--win-taskbar-element-height: 20px;
	--win-3d-objects-color: hsl(
		var(--win-3d-objects-color-h) var(--win-3d-objects-color-s) var(--win-3d-objects-color-l)
	);

	// These calculates match the actual win behavior
	--win-3d-objects-color-l-darker-1: calc(var(--win-3d-objects-shade-source-l) * (0.66));
	--win-3d-objects-color-l-darker-2: calc(var(--win-3d-objects-color-l-darker-1) * 2 / 3);
	--win-3d-objects-color-l-darker-3: calc(var(--win-3d-objects-color-l-darker-2) * 2 / 3);
	--win-3d-objects-color-l-ligher-1: calc(var(--win-3d-objects-shade-source-l) / 2 * 3);
	--win-3d-objects-color-l-ligher-2: calc(var(--win-3d-objects-color-l-ligher-1) / 2 * 3);
	--win-3d-objects-color-darker-1: hsl(
		var(--win-3d-objects-shade-source-h) var(--win-3d-objects-shade-source-s)
			var(--win-3d-objects-color-l-darker-1)
	);
	--win-3d-objects-color-lighter-1: hsl(
		var(--win-3d-objects-shade-source-h) var(--win-3d-objects-shade-source-s)
			var(--win-3d-objects-color-l-ligher-1)
	);
	--win-3d-objects-color-lighter-2: hsl(
		var(--win-3d-objects-shade-source-h) var(--win-3d-objects-shade-source-s)
			var(--win-3d-objects-color-l-ligher-2)
	);

	&.custom-scheme {
		// Only custom schemes shde with their actual object color
		--win-3d-objects-shade-source-h: var(--win-3d-objects-color-h);
		--win-3d-objects-shade-source-s: var(--win-3d-objects-color-s);
		--win-3d-objects-shade-source-l: var(--win-3d-objects-color-l);
	}

	&:not(.custom-scheme) {
		// rgb(192 192 192) #C0C0C0
		--win-3d-objects-shade-source-h: 160;
		--win-3d-objects-shade-source-s: 0%;
		--win-3d-objects-shade-source-l: 75.33%;
	}

	&-scheme-standard {
		// All values and names were picked from Windows 2000 Standard Scheme
		--win-desktop-color: #3a6ea5;

		// Used for all panels, everything that can be inset or outset, determines their background-color and outline colors
		// --win-3d-objects-color: rgb(212 208 200); // #d4d0c8 = rgb(212 208 200)
		--win-3d-objects-color-h: 40;
		--win-3d-objects-color-s: 12%;
		--win-3d-objects-color-l: 81%;
		--win-shadow-color: #404040; // #404040 = rgb(64 64 64) This is always fix in the standard theme
		--win-desktop-font-color: #fff; // On light win-backgrounds should turn to black
		--win-desktop-selected-font-color: #fff; // On light win-selection should turn to black
		--win-active-title-bar-color: #0a246a;
		--win-active-title-bar-color-2: #a6caf0;
		--win-inactive-title-bar-color: #808080;
		--win-inactive-title-bar-color-2: #c0c0c0;
		--win-active-title-bar-font-color: #fff;
		--win-inactive-title-bar-font-color: #c8c8c8;
		--win-selection-rgb: 10, 36, 106; // #0a246a icon, text highlight color
		--win-font-color: #000;
		--win-start-menu-highlight-color: #0a246a;

		button {
			font-family: 'fs-tahoma-8px', 'Pixelated MS Sans Serif', Tahoma, Geneva, Verdana,
				sans-serif !important; // It should stay as MS Sans Serif in the classic scheme 98.css
		}
	}

	&-scheme-classic {
		// Colors picked from Windows 2000 Classic Scheme
		--win-desktop-color: #008080;

		// Used for all panels, everything that can be inset or outset, determines their background-color and outline colors
		// --win-3d-objects-color: rgb(192 192 192); // #C0C0C0 = rgb(192 192 192)
		--win-3d-objects-color-h: 160;
		--win-3d-objects-color-s: 0%;
		--win-3d-objects-color-l: 75.33%; // Evaluates to rgb(192 192 192) #C0C0C0
		--win-shadow-color: #000; // This is always fix in the classic theme
		--win-desktop-font-color: #fff; // On light win-backgrounds should turn to black
		--win-desktop-selected-font-color: #fff; // On light win-selection should turn to black
		--win-active-title-bar-color: #000080;
		--win-active-title-bar-color-2: #1084d0;
		--win-inactive-title-bar-color: #808080;
		--win-inactive-title-bar-color-2: #b5b5b5;
		--win-active-title-bar-font-color: #fff;
		--win-inactive-title-bar-font-color: #c8c8c8;
		--win-selection-rgb: 10, 36, 106; // #0a246a icon, text highlight color
		--win-font-color: #000;
		--win-start-menu-highlight-color: #00007f;

		button {
			// TODO: Remove tahoma-8px from here, but fix the sizes of MS Sans Serif
			font-family: 'fs-tahoma-8px', 'Pixelated MS Sans Serif', Tahoma, Geneva, Verdana,
				sans-serif !important; // It should stay as MS Sans Serif in the classic scheme 98.css
		}
	}

	// Elements that should have 2px edges and shadows
	.window {
		background-color: var(--win-3d-objects-color);
		box-shadow:
			inset -1px -1px var(--win-shadow-color),
			inset 1px 1px var(--win-3d-objects-color),
			inset -2px -2px var(--win-3d-objects-color-darker-1),
			inset 2px 2px var(--win-3d-objects-color-lighter-2);
	}

	// Elements that should only have 1px edges and shadows
	button,
	.panel {
		box-sizing: border-box;
		border: #eee;
		border-style: none;
		border-spacing: 3px;
		border-width: 3px;
		border-left: 1px;
		border-top: 1px;
		border-right: 2px;
		border-bottom: 2px;
		outline-width: 0;
		background: var(--win-3d-objects-color);
		background-color: var(--win-3d-objects-color);
		padding: 1px;
	}

	.panel {
		&:not(.outset),
		&.inset {
			box-shadow:
				inset -1px -1px var(--win-3d-objects-color-lighter-1),
				inset 1px 1px var(--win-3d-objects-color-darker-1);
		}

		&.outset,
		&:not(.inset) {
			box-shadow:
				inset 1px 1px var(--win-3d-objects-color-lighter-1),
				inset -1px -1px var(--win-3d-objects-color-darker-1);
		}

		&.padded {
			padding: 4px;
		}
	}

	button {
		user-select: none !important;
		display: flex;
		align-items: center;
		flex-flow: row nowrap;
		gap: 4px;
		font-size: 18px;
		line-height: 14px;
		cursor: pointer;
		color: var(--win-font-color);
		white-space: nowrap;
		text-overflow: ellipsis;
		image-rendering: pixelated;
		min-width: 1px; // Reset from 98.css
		min-height: 1px; // Reset from 98.css
		text-shadow: none !important; // Reset from 98.css, used for the button presses
		margin-bottom: 1px;
		margin-top: 1px;

		// Regular
		&:not(.type-title-bar-menu-item) {
			&:active,
			.pressed {
				border-top: 1px solid var(--win-shadow-color);
				border-left: 1px solid var(--win-shadow-color);
				box-shadow:
					inset -1px -1px var(--win-3d-objects-color-lighter-1),
					inset 1px 1px var(--win-3d-objects-color-darker-1);
			}

			&:not(:active) {
				border-bottom: 1px solid var(--win-shadow-color);
				border-right: 1px solid var(--win-shadow-color);
				box-shadow:
					inset 1px 1px var(--win-3d-objects-color-lighter-1),
					inset -1px -1px var(--win-3d-objects-color-darker-1);
			}
		}

		// Maybe rename this to window menu item?
		&.type-title-bar-menu-item {
			height: 19px;
			padding: 2px 10px;
			display: block; // ::first-letter only works with block type elements

			> ::first-letter {
				// text-decoration: underline; // FAKE: shortcut letter, In Windows it's only visible if the user pressed the Alt key
				text-transform: uppercase;
			}

			&:active,
			&.active {
				box-shadow: inset -1px -1px var(--win-3d-objects-color-lighter-1);
				border-top: 1px solid var(--win-3d-objects-color-darker-1);
				border-left: 1px solid var(--win-3d-objects-color-darker-1);
			}

			&:not(:active, .active) {
				&:hover {
					box-shadow: inset 1px 1px var(--win-3d-objects-color-lighter-1);
					border-bottom: 1px solid var(--win-3d-objects-color-darker-1);
					border-right: 1px solid var(--win-3d-objects-color-darker-1);
				}

				&:not(:hover) {
					box-shadow: none;
					border-bottom: 1px solid rgb(1 1 1 / 0%);
					border-right: 1px solid rgb(1 1 1 / 0%);
				}
			}
		}

		&.type-context-menu-item,
		&.type-start-menu-item {
			border: none !important;
			box-shadow: none !important;

			::first-letter {
				text-transform: uppercase;
			}

			&:hover {
				background-color: var(--win-start-menu-highlight-color);
				color: white;
			}
		}

		&.type-context-menu-item:hover {
			.checkmark {
				filter: invert(1);
			}
		}

		&.disabled {
			cursor: default;
		}
	}

	.window:not(.active):has(.title-bar) {
		button {
			color: var(--win-inactive-title-bar-color);
		}
	}

	.title-bar {
		padding: 2px;

		/* stylelint-disable-next-line no-descending-specificity */
		.title-bar-controls button {
			min-width: 16px;
			min-height: 14px;
			margin-top: 0;
			margin-bottom: 0;
		}
	}

	.taskbar {
		> * {
			height: var(--win-taskbar-element-height);
			box-sizing: border-box;
		}
	}
}

body {
	display: block;
	height: 100vh;
	overscroll-behavior: none;
	background-color: var(--win-desktop-color);
	margin: 0;
	-webkit-touch-callout: none !important;
	font-family: 'fs-tahoma-8px', 'Pixelated MS Sans Serif', Tahoma, Geneva, Verdana, sans-serif !important;
}

hr {
	width: calc(100% - 4px);
	box-sizing: border-box;
	align-self: center;
	margin-bottom: 3px;
	margin-left: 2px;
	margin-right: 2px;
	outline: 0;
	border: 0;
	height: 2px;
	box-shadow:
		inset 0 1px var(--win-3d-objects-color-darker-1),
		inset 0 2px var(--win-3d-objects-color-lighter-1);
}
